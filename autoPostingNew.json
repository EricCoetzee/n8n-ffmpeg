{
  "nodes": [
    {
      "parameters": {
        "jsCode": "// If you need to process multiple paths\nfor (const item of items) {\n  const path = $input.first().json.path;\n  const filename = path ? path.split(/[\\/\\\\]/).pop() : '';\n  item.json.filename = filename;\n}\nreturn items;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5296,
        128
      ],
      "id": "b2f98066-eabe-418d-abf5-9e66ee28dde0",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "triggerOn": "folder",
        "path": "/home/node/gta5/",
        "events": [
          "add"
        ],
        "options": {
          "awaitWriteFinish": true
        }
      },
      "type": "n8n-nodes-base.localFileTrigger",
      "typeVersion": 1,
      "position": [
        -5520,
        128
      ],
      "id": "49b688ca-12e0-4159-b3b8-eb63a36e1728",
      "name": "Local File Trigger"
    },
    {
      "parameters": {
        "fileSelector": "=/home/node/{{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}.mp4",
        "options": {
          "mimeType": "video/mp4"
        }
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1552,
        128
      ],
      "id": "b0862f82-315b-4232-bb38-d6f568791629",
      "name": "Read/Write Files from Disk1",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "postSettings": {
          "text": "={{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}\n\n{{ $('Basic LLM Chain').item.json.text }}",
          "visibilityType": 0,
          "allowComment": 1,
          "scheduleTime": 0
        }
      },
      "type": "n8n-nodes-social-tiktok.tikTokUpload",
      "typeVersion": 1,
      "position": [
        1776,
        128
      ],
      "id": "1a29ec65-dbd0-4067-91ed-51d91ccc8782",
      "name": "TikTok Upload",
      "credentials": {
        "tiktokApi": {
          "id": "n5TtWpn2oycs3kNb",
          "name": "Unrealg Tiktok"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Get first input item\nconst item = $input.first();\nconst original = $('Code in JavaScript').first().json.filename || $('Code in JavaScript').first().json.path || item.json.string || \"\";\n\nif (!original) {\n  return [{\n    json: {\n      ...item.json,\n      error: \"No filename found\"\n    }\n  }];\n}\n\n// Remove .mp4 from the end (case-insensitive)\nlet cleaned = original.toString().replace(/\\.mp4$/i, '');\n\n// Replace all underscores with spaces\ncleaned = cleaned.replace(/_/g, '_');\n\n// Return single processed item\nreturn [{\n  json: {\n    ...item.json,\n    cleaned: cleaned,\n    original: original\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5072,
        128
      ],
      "id": "98f155cb-cfdb-467c-8ba8-272db40a4a06",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "fileSelector": "=/home/node/{{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}.mp4",
        "options": {
          "mimeType": "video/mp4"
        }
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        656,
        128
      ],
      "id": "69bdb02c-9352-469a-bb20-1db405091d6a",
      "name": "Read/Write Files from Disk",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "resource": "video",
        "operation": "upload",
        "title": "={{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}\n\n{{ $('Basic LLM Chain').item.json.text }}",
        "regionCode": "ZA",
        "categoryId": "20",
        "options": {
          "description": "={{ $('Code in JavaScript1').item.json.cleaned }}",
          "privacyStatus": "public"
        }
      },
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        880,
        128
      ],
      "id": "9eab57ab-499b-4952-ad65-a1c0f41e696e",
      "name": "Upload a video",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "bbaDH86jMalnqUqG",
          "name": "Supz Office YT"
        }
      }
    },
    {
      "parameters": {
        "fileSelector": "={{ $('Code in JavaScript').item.json.path }}",
        "options": {
          "mimeType": "video/mp4"
        }
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -1584,
        128
      ],
      "id": "aae79762-5a30-4442-9f7e-65ef2538bafa",
      "name": "Read/Write Files from Disk2"
    },
    {
      "parameters": {
        "resource": "video",
        "operation": "upload",
        "title": "={{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}",
        "regionCode": "ZA",
        "categoryId": "20",
        "options": {
          "defaultLanguage": "en",
          "description": "={{ $('Code in JavaScript3').item.json.result }}",
          "embeddable": true,
          "license": "youtube",
          "privacyStatus": "unlisted",
          "publicStatsViewable": false,
          "recordingDate": "={{ $now }}",
          "selfDeclaredMadeForKids": false,
          "tags": "={{ $('Code in JavaScript2').item.json.tagString }}"
        }
      },
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        -1360,
        128
      ],
      "id": "cb9dcf45-c43f-4d66-b8e0-34e4251f8fbb",
      "name": "Upload a video1",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "bbaDH86jMalnqUqG",
          "name": "Supz Office YT"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const allTags = [\n \"coupe\", \"convertible\", \"SUV\", \"truck\", \"pickup\", \"van\", \"motorcycle\", \"bike\", \"bicycle\", \"boat\", \"plane\", \"helicopter\", \"tank\", \"emergency vehicle\", \"police car\", \"fire truck\", \"ambulance\", \"taxi\", \"bus\", \"tractor\", \"combine\", \"monster truck\", \"dune buggy\", \"go kart\", \"RC vehicle\", \"hovercraft\", \"jetpack\", \"nitrous\", \"hydraulics\", \"body kits\", \"spoilers\", \"bumpers\", \"side skirts\", \"roof scoops\", \"exhaust\", \"wheels\", \"rims\", \"paint jobs\", \"colors\", \"vinyls\", \"car modification\", \"car customization\", \"tuning\", \"import cars\", \"export cars\", \"car theft\", \"vehicle damage\", \"car physics\", \"handling\", \"speed\", \"acceleration\", \"braking\", \"top speed\", \"durability\", \"mass\", \"gang cars\", \"vehicle missions\", \"courier missions\", \"trucking missions\", \"taxi missions\", \"ambulance missions\", \"firefighter missions\", \"police missions\", \"race tournaments\", \"street races\", \"off-road racing\", \"stadium events\", \"car dealerships\", \"rare vehicles\", \"hidden vehicles\", \"unique vehicles\", \"bulletproof vehicles\", \"fireproof vehicles\", \"explosive vehicles\", \"two-player vehicles\", \"amphibious vehicles\", \"flying vehicles\", \"land vehicles\", \"water vehicles\", \"air vehicles\", \"civilian vehicles\", \"industrial vehicles\", \"service vehicles\", \"public service vehicles\", \"military vehicles\", \"emergency services\", \"law enforcement\", \"gang vehicles\", \"unique colors\", \"special modifications\", \"performance upgrades\", \"visual upgrades\", \"engine\", \"transmission\", \"suspension\", \"brakes\", \"tires\", \"armor\", \"weight reduction\", \"acceleration boost\", \"handling improvements\", \"drift\", \"burnout\", \"wheelie\", \"stoppie\", \"bunny hop\", \"car chase\", \"vehicle pursuit\", \"getaway car\", \"drive-by\", \"car jacking\", \"vehicle spawning\", \"parked cars\", \"traffic\", \"pedestrian vehicles\", \"mission vehicles\", \"scripted vehicles\", \"garage storage\", \"safe house parking\", \"impound lot\", \"pay n spray\", \"respray\", \"vehicle repair\", \"damage system\", \"scratches\", \"dents\", \"broken windows\", \"flat tires\", \"engine fire\", \"smoking engine\", \"vehicle explosion\", \"vehicle destruction\", \"wreckage\", \"abandoned vehicles\", \"rusty cars\", \"beach vehicles\", \"countryside vehicles\", \"city vehicles\", \"desert vehicles\", \"mountain vehicles\", \"highway vehicles\", \"backroad vehicles\", \"off-road capable\", \"four-wheel drive\", \"rear-wheel drive\", \"front-wheel drive\", \"all-wheel drive\", \"manual transmission\", \"automatic transmission\", \"turbocharged\", \"supercharged\", \"naturally aspirated\", \"V8 engine\", \"V6 engine\", \"four cylinder\", \"high performance\", \"low performance\", \"daily driver\", \"weekend car\", \"show car\", \"drag racer\", \"circuit racer\", \"rally car\", \"drift car\", \"stance\", \"slammed\", \"lifted\", \"bagged\", \"air suspension\", \"coilovers\", \"camber\", \"toe\", \"caster\", \"alignment\", \"track width\", \"wheelbase\", \"ground clearance\", \"ride height\", \"weight distribution\", \"power to weight ratio\", \"torque\", \"horsepower\", \"RPM\", \"redline\", \"fuel consumption\", \"fuel tank\", \"passenger capacity\", \"cargo space\", \"trunk space\", \"door count\", \"convertible top\", \"hardtop\", \"sunroof\", \"tinted windows\", \"bulletproof glass\", \"reinforced chassis\", \"roll cage\", \"racing seats\", \"racing harness\", \"steering wheel\", \"dashboard\", \"speedometer\", \"tachometer\", \"odometer\", \"fuel gauge\", \"temperature gauge\", \"GPS\", \"radio\", \"car stereo\", \"bass\", \"speakers\", \"amplifier\", \"subwoofer\", \"underglow\", \"neon lights\", \"headlights\", \"taillights\", \"brake lights\", \"turn signals\", \"hazard lights\", \"fog lights\", \"high beams\", \"license plate\", \"hood ornament\", \"antenna\", \"mirrors\", \"door handles\", \"gas cap\", \"badges\", \"emblems\", \"decals\", \"pinstripes\", \"flames\", \"tribal designs\", \"racing stripes\", \"carbon fiber\", \"chrome\", \"matte finish\", \"metallic paint\", \"pearl paint\", \"candy paint\", \"chameleon paint\", \"wrap\", \"rust\", \"primer\", \"scratched paint\", \"faded paint\", \"clean car\", \"dirty car\", \"muddy car\", \"dusty car\", \"wet car\", \"shiny car\", \"detailed car\", \"barn find\", \"junkyard car\", \"restored car\", \"project car\", \"sleeper car\", \"grocery getter\", \"family car\", \"commuter car\", \"work truck\", \"trade vehicle\", \"company car\", \"rental car\", \"stolen vehicle\", \"hot car\", \"marked bills\", \"chop shop\", \"garage\", \"workshop\", \"mechanic\", \"auto shop\", \"dealership\", \"parking lot\", \"street parking\", \"parallel parking\", \"valet\", \"car show\", \"meet up\", \"cruise\", \"convoy\", \"road trip\", \"joyride\", \"test drive\", \"demo car\", \"rental\", \"lease\", \"purchase\", \"sale\", \"trade in\", \"value\", \"depreciation\", \"insurance\", \"registration\", \"title\", \"pink slip\", \"ownership\", \"VIN number\"\n];\n\n// Fisher-Yates shuffle algorithm\nfunction shuffleArray(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n  return array;\n}\n\n// Get 20 random unique tags\nconst shuffledTags = shuffleArray([...allTags]);\nconst selected = shuffledTags.slice(0, 20);\n\nreturn {\n  json: {\n    randomTags: selected,\n    tagString: selected.join(', '),\n    tagArray: selected\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1808,
        128
      ],
      "id": "f4d04203-8b23-453f-a5c0-9a64ee1d2239",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Generate a viral short description about the {{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }} {{ $('Video Category').item.json.extractedText }}",
        "messages": {
          "messageValues": [
            {
              "message": "=Generate a viral short description about the  {{ $json.cleaned }}"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -2160,
        128
      ],
      "id": "d9fc6fa4-b153-4beb-904d-9c82ebd96398",
      "name": "Basic LLM Chain"
    },
    {
      "parameters": {
        "model": "deepseek/deepseek-v3.2-speciale",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -2088,
        352
      ],
      "id": "12b5c2d5-0f24-47a7-aa5c-c405c8402b47",
      "name": "OpenRouter Chat Model",
      "credentials": {
        "openRouterApi": {
          "id": "cjnWNekFaLOaE5aQ",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned; // Replace 'yourStringField' with your actual field name\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  // Return an error message if input is invalid\n  return [{ json: { error: 'Input string is undefined or not a string', extractedText: '' } }];\n}\n\n// Define your delimiters\nconst startChar = '@'; // Start delimiter\nconst endChar = '@';   // End delimiter\n\n// Find the positions of the delimiters\nconst startIndex = inputString.indexOf(startChar);\nconst endIndex = inputString.indexOf(endChar, startIndex + 1);\n\n// Extract text if both delimiters are found\nlet extractedText = '';\nif (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\n  extractedText = inputString.substring(startIndex + 1, endIndex);\n}\n\n// Return the result\nreturn [{ json: { extractedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4400,
        128
      ],
      "id": "117d47d5-0228-4082-8f2a-32c2f666ce31",
      "name": "GAME NAME"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned; // Replace 'yourStringField' with your actual field name\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  // Return an error message if input is invalid\n  return [{ json: { error: 'Input string is undefined or not a string', extractedText: '' } }];\n}\n\n// Define your delimiters\nconst startChar = '-'; // Start delimiter\nconst endChar = '-';   // End delimiter\n\n// Find the positions of the delimiters\nconst startIndex = inputString.indexOf(startChar);\nconst endIndex = inputString.indexOf(endChar, startIndex + 1);\n\n// Extract text if both delimiters are found\nlet extractedText = '';\nif (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\n  extractedText = inputString.substring(startIndex + 1, endIndex);\n}\n\n// Return the result\nreturn [{ json: { extractedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2384,
        128
      ],
      "id": "67070148-9c8e-4139-9430-d4231090c852",
      "name": "characters"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned; // Replace 'yourStringField' with your actual field name\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  // Return an error message if input is invalid\n  return [{ json: { error: 'Input string is undefined or not a string', extractedText: '' } }];\n}\n\n// Define your delimiters\nconst startChar = ','; // Start delimiter\nconst endChar = ',';   // End delimiter\n\n// Find the positions of the delimiters\nconst startIndex = inputString.indexOf(startChar);\nconst endIndex = inputString.indexOf(endChar, startIndex + 1);\n\n// Extract text if both delimiters are found\nlet extractedText = '';\nif (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\n  extractedText = inputString.substring(startIndex + 1, endIndex);\n}\n\n// Return the result\nreturn [{ json: { extractedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2832,
        128
      ],
      "id": "d49905f1-7969-4914-9f85-f4fb0c48b008",
      "name": "link"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned; // Replace 'yourStringField' with your actual field name\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  // Return an error message if input is invalid\n  return [{ json: { error: 'Input string is undefined or not a string', extractedText: '' } }];\n}\n\n// Define your delimiters\nconst startChar = '_'; // Start delimiter\nconst endChar = '_';   // End delimiter\n\n// Find the positions of the delimiters\nconst startIndex = inputString.indexOf(startChar);\nconst endIndex = inputString.indexOf(endChar, startIndex + 1);\n\n// Extract text if both delimiters are found\nlet extractedText = '';\nif (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\n  extractedText = inputString.substring(startIndex + 1, endIndex);\n}\n\n// Return the result\nreturn [{ json: { extractedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2608,
        128
      ],
      "id": "dcacbf62-ad02-4e53-b92f-4602441334b9",
      "name": "Video Location"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned; // Replace 'yourStringField' with your actual field name\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  // Return an error message if input is invalid\n  return [{ json: { error: 'Input string is undefined or not a string', extractedText: '' } }];\n}\n\n// Define your delimiters\nconst startChar = '('; // Start delimiter\nconst endChar = ')';   // End delimiter\n\n// Find the positions of the delimiters\nconst startIndex = inputString.indexOf(startChar);\nconst endIndex = inputString.indexOf(endChar, startIndex + 1);\n\n// Extract text if both delimiters are found\nlet extractedText = '';\nif (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\n  extractedText = inputString.substring(startIndex + 1, endIndex);\n}\n\n// Return the result\nreturn [{ json: { extractedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3280,
        128
      ],
      "id": "fb35758f-c604-4abe-bdbc-5aa8ad3ddb95",
      "name": "Video Category"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned; // Replace 'yourStringField' with your actual field name\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  // Return an error message if input is invalid\n  return [{ json: { error: 'Input string is undefined or not a string', extractedText: '' } }];\n}\n\n// Define your delimiters\nconst startChar = '!'; // Start delimiter\nconst endChar = '!';   // End delimiter\n\n// Find the positions of the delimiters\nconst startIndex = inputString.indexOf(startChar);\nconst endIndex = inputString.indexOf(endChar, startIndex + 1);\n\n// Extract text if both delimiters are found\nlet extractedText = '';\nif (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\n  extractedText = inputString.substring(startIndex + 1, endIndex);\n}\n\n// Return the result\nreturn [{ json: { extractedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3504,
        128
      ],
      "id": "ceef7911-3915-4e7f-aa8c-bdecc970766c",
      "name": "Video View"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned; // Replace 'yourStringField' with your actual field name\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  // Return an error message if input is invalid\n  return [{ json: { error: 'Input string is undefined or not a string', extractedText: '' } }];\n}\n\n// Define your delimiters\nconst startChar = '%'; // Start delimiter\nconst endChar = '%';   // End delimiter\n\n// Find the positions of the delimiters\nconst startIndex = inputString.indexOf(startChar);\nconst endIndex = inputString.indexOf(endChar, startIndex + 1);\n\n// Extract text if both delimiters are found\nlet extractedText = '';\nif (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\n  extractedText = inputString.substring(startIndex + 1, endIndex);\n}\n\n// Return the result\nreturn [{ json: { extractedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3728,
        128
      ],
      "id": "79dcfbd3-c0d0-49ca-8b7c-652951109721",
      "name": "Video Item"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned; // Replace 'yourStringField' with your actual field name\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  // Return an error message if input is invalid\n  return [{ json: { error: 'Input string is undefined or not a string', extractedText: '' } }];\n}\n\n// Define your delimiters\nconst startChar = '#'; // Start delimiter\nconst endChar = '#';   // End delimiter\n\n// Find the positions of the delimiters\nconst startIndex = inputString.indexOf(startChar);\nconst endIndex = inputString.indexOf(endChar, startIndex + 1);\n\n// Extract text if both delimiters are found\nlet extractedText = '';\nif (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\n  extractedText = inputString.substring(startIndex + 1, endIndex);\n}\n\n// Return the result\nreturn [{ json: { extractedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4176,
        128
      ],
      "id": "dd095e78-797a-43ac-a1eb-336927f6738f",
      "name": "GAME Version"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned;\n\n// Define delimiter pairs\nconst delimiters = [\n   { start: '@', end: '@' },\n  { start: '#', end: '#' },\n  { start: '%', end: '%' },\n  { start: '!', end: '!' },\n  { start: '(', end: ')' },\n  { start: ',', end: ',' },  // Added missing comma\n  { start: '.', end: '.' },  // Added missing comma\n  { start: '_', end: '_' },  // Added missing comma\n  { start: '-', end: '-' }\n];\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  return [{\n    json: { error: 'Input string is undefined or not a string', lowercaseWords: [] }\n  }];\n}\n\n// Remove text inside delimiters\nlet cleaned = inputString;\n\nfor (const { start, end } of delimiters) {\n  const regex = new RegExp(`\\\\${start}[^${end}]*\\\\${end}`, 'g');\n  cleaned = cleaned.replace(regex, ' ');\n}\n\n// Normalize spaces\ncleaned = cleaned.replace(/\\s+/g, ' ').trim();\n\n// Match words that begin with a lowercase letter\nconst matches = cleaned.match(/\\b[a-z][a-zA-Z']*\\b/g) || [];\n\n// Return ALL matching words\nreturn [{\n  json: {\n    lowercaseWords: matches\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3952,
        128
      ],
      "id": "6a49f27c-0fcb-402b-b1ab-2753395fe02c",
      "name": "Video TYPE"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned;\n\n// Define delimiter pairs\nconst delimiters = [\n  { start: '@', end: '@' },\n  { start: '#', end: '#' },\n  { start: '%', end: '%' },\n  { start: '!', end: '!' },\n  { start: '(', end: ')' },\n  { start: ',', end: ',' },  // Added missing comma\n  { start: '.', end: '.' },  // Added missing comma\n  { start: '_', end: '_' },  // Added missing comma\n  { start: '-', end: '-' }\n];\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  return [{\n    json: { error: 'Input string is undefined or not a string', first3Capitalized: '' }\n  }];\n}\n\n// Remove text inside delimiters\nlet cleaned = inputString;\nfor (const { start, end } of delimiters) {\n  const regex = new RegExp(`\\\\${start}[^${end}]*\\\\${end}`, 'g');  // Fixed: parentheses instead of backticks\n  cleaned = cleaned.replace(regex, '');\n}\n\n// Regex: match words starting with a capital letter\nconst matches = cleaned.match(/\\b[A-Z][a-zA-Z']*\\b/g);\n\n// Get the first 3 capitalized words\nconst first3 = matches ? matches.slice(0, 3).join(' ') : '';\n\n// Return result\nreturn [{\n  json: { first3Capitalized: first3 }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4624,
        128
      ],
      "id": "aef4f247-406e-4edb-8a3f-ca3bdeda76aa",
      "name": "GAME"
    },
    {
      "parameters": {
        "jsCode": "// Get the input string from the previous node\nconst inputString = $('Code in JavaScript1').first().json.cleaned; // Replace 'yourStringField' with your actual field name\n\n// Check if input exists and is a string\nif (typeof inputString !== 'string') {\n  // Return an error message if input is invalid\n  return [{ json: { error: 'Input string is undefined or not a string', extractedText: '' } }];\n}\n\n// Define your delimiters\nconst startChar = '.'; // Start delimiter\nconst endChar = '.';   // End delimiter\n\n// Find the positions of the delimiters\nconst startIndex = inputString.indexOf(startChar);\nconst endIndex = inputString.indexOf(endChar, startIndex + 1);\n\n// Extract text if both delimiters are found\nlet extractedText = '';\nif (startIndex !== -1 && endIndex !== -1 && endIndex > startIndex) {\n  extractedText = inputString.substring(startIndex + 1, endIndex);\n}\n\n// Return the result\nreturn [{ json: { extractedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3056,
        128
      ],
      "id": "a54ae4df-d2b1-433b-ac28-e362990893b0",
      "name": "Video Category2"
    },
    {
      "parameters": {
        "jsCode": "const input = $input.first().json.cleaned;\n\nconst result = input.replace(/[%()]/g, (match) => {\n  switch(match) {\n    case '%': return '/';\n    case '(': return '?';\n    case ')': return '?';\n    default: return match;\n  }\n});\n\nreturn { result };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4848,
        128
      ],
      "id": "f96a1dee-3b43-4ade-8b97-3dda92ede235",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "command": "=ffmpeg -ss 00:02:00 -to 00:04:00 -i \"{{ $('Code in JavaScript').item.json.path }}\" \\\n-vf \"crop=ih*9/16:ih,scale=1080:1920,drawtext=\ntext='GTA {{ $('GAME NAME').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}':\nfont='DejaVuSans-Bold':\nfontsize=52:\nfontcolor=#ffffff:\nborderw=16:\nbordercolor=black:\nx='(w-tw)/2':\ny='h*0.15':\nalpha='if(lt(t,10),0,\n    if(lt(t,10.8),(t-10)/0.8,\n        if(lt(t,15),1,\n            if(lt(t,15.8),1-(t-15)/0.8,\n                0\n            )\n        )\n    )\n)'\" \\\n-c:a copy \"/home/node/{{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}.mp4\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        208,
        128
      ],
      "id": "022b9c06-e303-4ab9-bec1-72c64c672e07",
      "name": "Execute Command"
    },
    {
      "parameters": {
        "command": "=ffmpeg -sseof -0.1 -i \"{{ $('Code in JavaScript').item.json.path }}\" -frames:v 1 \"/home/node/{{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}_last_frame.jpg\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -1136,
        128
      ],
      "id": "58713557-32c2-4d91-8498-614aa466e041",
      "name": "Execute Command1"
    },
    {
      "parameters": {
        "fileSelector": "=/home/node/{{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}_last_frame.jpg",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -912,
        128
      ],
      "id": "3a1d15f9-dd2d-4b2d-b6f0-479254fc5e75",
      "name": "Read/Write Files from Disk3"
    },
    {
      "parameters": {
        "operation": "text",
        "text": "={{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}",
        "fontSize": 90,
        "fontColor": "#FFFFFF",
        "positionX": 670,
        "positionY": 100,
        "lineLength": 25,
        "options": {
          "fileName": "image",
          "font": "/usr/share/fonts/truetype/msttcorefonts/Impact.ttf"
        }
      },
      "type": "n8n-nodes-base.editImage",
      "typeVersion": 1,
      "position": [
        -688,
        128
      ],
      "id": "93c8ebd1-cab4-4028-8f91-c6b0297c974f",
      "name": "Edit Image"
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "1jQeWveePZk7ulWzxcuC-kKwDrCJxHiAd",
          "mode": "list",
          "cachedResultName": "gta5logo.png",
          "cachedResultUrl": "https://drive.google.com/file/d/1jQeWveePZk7ulWzxcuC-kKwDrCJxHiAd/view?usp=drivesdk"
        },
        "options": {
          "binaryPropertyName": "overlay",
          "fileName": "overlay"
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -464,
        128
      ],
      "id": "1fdd5e95-6bae-4410-96fd-98ee0a7fbaa1",
      "name": "Download file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "OojxnZwBAUKSpiO8",
          "name": "Supz Drive For UnrealG"
        }
      }
    },
    {
      "parameters": {
        "operation": "composite",
        "dataPropertyNameComposite": "overlay",
        "positionX": 20,
        "positionY": 650,
        "options": {}
      },
      "type": "n8n-nodes-base.editImage",
      "typeVersion": 1,
      "position": [
        -240,
        128
      ],
      "id": "9a5d8300-6aa9-4a22-afd4-dd32e73bd670",
      "name": "Edit Image1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId={{ $('Upload a video1').item.json.uploadId }}&uploadType=media ",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "youTubeOAuth2Api",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "YouTube Upload",
              "value": "n8n-nodes-base.httpRequest"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "={{ $json.mimeType }}"
            }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "=data",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -16,
        128
      ],
      "id": "ad9cd651-f951-405a-9900-c309bc32ec3b",
      "name": "HTTP Request4",
      "alwaysOutputData": false,
      "executeOnce": false,
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "bbaDH86jMalnqUqG",
          "name": "Supz Office YT"
        }
      }
    },
    {
      "parameters": {
        "fileSelector": "=/home/node/{{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}.mp4",
        "options": {
          "mimeType": "video/mp4"
        }
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        2000,
        128
      ],
      "id": "fcf0b89a-8f85-4146-8e67-28edc38a5838",
      "name": "Read/Write Files from Disk6",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "postSettings": {
          "text": "={{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}\n\n{{ $('Basic LLM Chain').item.json.text }}",
          "visibilityType": 0,
          "allowComment": 1,
          "scheduleTime": 0
        }
      },
      "type": "n8n-nodes-social-tiktok.tikTokUpload",
      "typeVersion": 1,
      "position": [
        2224,
        128
      ],
      "id": "921ac8c3-0d7a-401a-bf20-c6bb51a81f41",
      "name": "TikTok Upload1",
      "credentials": {
        "tiktokApi": {
          "id": "LdEXieVtBXTSvAur",
          "name": "Unreal G Backup"
        }
      }
    },
    {
      "parameters": {
        "command": "=ffmpeg -ss 00:00:00 -to 00:02:00 -i \"{{ $('Code in JavaScript').item.json.path }}\" \\\n-vf \"crop=ih*9/16:ih,scale=1080:1920,drawtext=\ntext='GTA {{ $('GAME NAME').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}':\nfont='DejaVuSans-Bold':\nfontsize=52:\nfontcolor=#C2494F:\nborderw=16:\nbordercolor=blue:\nx='(w-tw)/2':\ny='h*0.15':\nalpha='if(lt(t,10),0,\n    if(lt(t,10.8),(t-10)/0.8,\n        if(lt(t,15),1,\n            if(lt(t,15.8),1-(t-15)/0.8,\n                0\n            )\n        )\n    )\n)'\" \\\n-c:a copy \"/home/node/{{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}_2.mp4\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        432,
        128
      ],
      "id": "b9935ce8-2aec-4046-81b8-e1b00fa82daf",
      "name": "Execute Command2"
    },
    {
      "parameters": {
        "fileSelector": "=/home/node/{{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}_2.mp4",
        "options": {
          "mimeType": "video/mp4"
        }
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1104,
        128
      ],
      "id": "813d67a0-f5b5-4cb9-9317-44a38de216e8",
      "name": "Read/Write Files from Disk7",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "resource": "video",
        "operation": "upload",
        "title": "={{ $('GAME').item.json.first3Capitalized }} {{ $('GAME NAME').item.json.extractedText }} {{ $('GAME Version').item.json.extractedText }} {{ $('Video TYPE').item.json.lowercaseWords[0] }} {{ $('Video Item').item.json.extractedText }}\n\n{{ $('Basic LLM Chain').item.json.text }}",
        "regionCode": "ZA",
        "categoryId": "20",
        "options": {
          "description": "={{ $('Code in JavaScript1').item.json.cleaned }}",
          "privacyStatus": "public"
        }
      },
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        1328,
        128
      ],
      "id": "46e893ad-d465-435c-b371-3c02f93bcf0f",
      "name": "Upload a video4",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "YrXaqPkqXAt5tKtV",
          "name": "Vehicles"
        }
      }
    }
  ],
  "connections": {
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Local File Trigger": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk1": {
      "main": [
        [
          {
            "node": "TikTok Upload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "TikTok Upload": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "Upload a video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload a video": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk2": {
      "main": [
        [
          {
            "node": "Upload a video1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload a video1": {
      "main": [
        [
          {
            "node": "Execute Command1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "GAME NAME": {
      "main": [
        [
          {
            "node": "GAME Version",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "characters": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "link": {
      "main": [
        [
          {
            "node": "Video Location",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video Location": {
      "main": [
        [
          {
            "node": "characters",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video Category": {
      "main": [
        [
          {
            "node": "Video Category2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video View": {
      "main": [
        [
          {
            "node": "Video Category",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video Item": {
      "main": [
        [
          {
            "node": "Video View",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GAME Version": {
      "main": [
        [
          {
            "node": "Video TYPE",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video TYPE": {
      "main": [
        [
          {
            "node": "Video Item",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GAME": {
      "main": [
        [
          {
            "node": "GAME NAME",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video Category2": {
      "main": [
        [
          {
            "node": "link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "GAME",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command": {
      "main": [
        [
          {
            "node": "Execute Command2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command1": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk3": {
      "main": [
        [
          {
            "node": "Edit Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Image": {
      "main": [
        [
          {
            "node": "Download file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download file": {
      "main": [
        [
          {
            "node": "Edit Image1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Image1": {
      "main": [
        [
          {
            "node": "HTTP Request4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request4": {
      "main": [
        [
          {
            "node": "Execute Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk6": {
      "main": [
        [
          {
            "node": "TikTok Upload1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command2": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk7": {
      "main": [
        [
          {
            "node": "Upload a video4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload a video4": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "7d6a4e3a6f5568d381546009203219c88edd6085ef62ebf78defe4109999f50f"
  }
}
